{"ast":null,"code":"var _jsxFileName = \"/home/ivaylokartev/CookMasterShare/src/App.js\",\n  _s = $RefreshSig$();\nimport './App.css';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, GoogleAuthProvider, signInWithPopup, createUserWithEmailAndPassword, signInWithEmailAndPassword, FacebookAuthProvider } from 'firebase/auth';\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport Home from './Components/Home';\nimport LoginPage from './LoginPage';\nimport { useEffect, useState } from 'react';\nimport AccountPage from './Components/AccountPage';\nimport { getFirestore, orderBy } from \"firebase/firestore\";\nimport { doc, setDoc } from \"firebase/firestore\";\nimport { collection, query, where, getDocs, addDoc } from \"firebase/firestore\";\nimport { getStorage, ref, uploadBytes } from 'firebase/storage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD99Ps3ewiDL7WTtaCJaDqBmo5dmSRjuCo\",\n  authDomain: \"cook-mastershare.firebaseapp.com\",\n  projectId: \"cook-mastershare\",\n  storageBucket: \"cook-mastershare.appspot.com\",\n  messagingSenderId: \"901848339378\",\n  appId: \"1:901848339378:web:ea76b02d8ef1cff6670aab\",\n  measurementId: \"G-11NKHJEW95\"\n};\nexport let app = initializeApp(firebaseConfig);\nlet auth = getAuth(app);\nlet db = getFirestore(app);\nlet recipes = await getDocs(collection(db, \"recipes\"));\nexport const storage = getStorage(app);\nfunction App() {\n  _s();\n  const [showLogin, setShowLogin] = useState(false);\n  const [user] = useAuthState(auth);\n  const [altName, setAltName] = useState('');\n  const [showAccount, setShowAccount] = useState(false);\n  let recipesToShow = [];\n  recipes.forEach(doc => {\n    recipesToShow.push(doc.data());\n  });\n  recipesToShow.sort((a, b) => a.date > b.date ? 1 : b.date > a.date ? -1 : 0);\n  async function addToDataBase(tname, desc, tcontent, timage, tdate) {\n    try {\n      const docRef = await addDoc(collection(db, \"recipes\"), {\n        name: tname,\n        description: desc,\n        content: tcontent,\n        image: timage,\n        author: user.displayName ? user.displayName : nameFromEmail(user.email),\n        likes: 0,\n        date: tdate\n      });\n      console.log(\"Document written with ID: \", tname);\n    } catch (e) {\n      console.error(\"Error adding document: \", e);\n    }\n  }\n  function changeShowAccount() {\n    setShowAccount(!showAccount);\n    console.log(showAccount);\n  }\n  function changeAltName(newName) {\n    setAltName(newName);\n  }\n  async function changeEmailAndPass(newemail, newpass) {\n    await signInWithEmailAndPassword(auth, newemail, newpass);\n  }\n  async function signInWithGoogle() {\n    let provider = new GoogleAuthProvider();\n    await signInWithPopup(auth, provider);\n  }\n  async function signInWithFacebook() {\n    let provider = new FacebookAuthProvider();\n    await signInWithPopup(auth, provider);\n  }\n  async function setShowLoginFalse() {\n    await setShowLogin(false);\n  }\n  async function createAccount(thisemail, thispass) {\n    createUserWithEmailAndPassword(auth, thisemail, thispass);\n  }\n  async function signInWithEmail() {\n    signInWithEmailAndPassword(auth, \"emailVar@abv.bg\", \"passwordVar\");\n  }\n  function signOut() {\n    auth.signOut();\n  }\n  function nameFromEmail(emailStr) {\n    let res = String('');\n    let i = 0;\n    while (emailStr.charAt(i) !== \"@\") {\n      res += emailStr.charAt(i);\n      i++;\n    }\n    return res;\n  }\n  if (showLogin) {\n    return /*#__PURE__*/_jsxDEV(LoginPage, {\n      altName: changeAltName,\n      signInWithGoogle: signInWithGoogle,\n      email: changeEmailAndPass,\n      signInWithEmail: signInWithEmail,\n      showLogin: setShowLoginFalse,\n      signInWithFacebook: signInWithFacebook,\n      createAccount: createAccount\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 12\n    }, this);\n  }\n  if (showAccount) {\n    return /*#__PURE__*/_jsxDEV(AccountPage, {\n      type: user.displayName ? user.displayName : nameFromEmail(user.email),\n      name: user.displayName ? user.displayName : nameFromEmail(user.email),\n      email: user.email,\n      signOut: signOut,\n      unshowAccount: changeShowAccount,\n      addToDB: addToDataBase\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: user ? /*#__PURE__*/_jsxDEV(Home, {\n      type: user.displayName ? user.displayName : nameFromEmail(user.email),\n      btnEvent: changeShowAccount,\n      recipes: recipesToShow\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }, this) : /*#__PURE__*/_jsxDEV(Home, {\n      type: \"Login\",\n      btnEvent: () => setShowLogin(true),\n      recipes: recipesToShow\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 149\n    }, this)\n  }, void 0, false);\n}\n_s(App, \"sy7ftTQLRwtnmjdQjG5HHPXNcYA=\", false, function () {\n  return [useAuthState];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["initializeApp","getAuth","GoogleAuthProvider","signInWithPopup","createUserWithEmailAndPassword","signInWithEmailAndPassword","FacebookAuthProvider","useAuthState","Home","LoginPage","useEffect","useState","AccountPage","getFirestore","orderBy","doc","setDoc","collection","query","where","getDocs","addDoc","getStorage","ref","uploadBytes","jsxDEV","_jsxDEV","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","recipes","storage","App","_s","showLogin","setShowLogin","user","altName","setAltName","showAccount","setShowAccount","recipesToShow","forEach","push","data","sort","a","b","date","addToDataBase","tname","desc","tcontent","timage","tdate","docRef","name","description","content","image","author","displayName","nameFromEmail","email","likes","console","log","e","error","changeShowAccount","changeAltName","newName","changeEmailAndPass","newemail","newpass","signInWithGoogle","provider","signInWithFacebook","setShowLoginFalse","createAccount","thisemail","thispass","signInWithEmail","signOut","emailStr","res","String","i","charAt","fileName","_jsxFileName","lineNumber","columnNumber","type","unshowAccount","addToDB","children","btnEvent","_c","$RefreshReg$"],"sources":["/home/ivaylokartev/CookMasterShare/src/App.js"],"sourcesContent":["import './App.css';\nimport {initializeApp} from 'firebase/app';\nimport {getAuth, GoogleAuthProvider, signInWithPopup, createUserWithEmailAndPassword, signInWithEmailAndPassword, FacebookAuthProvider} from 'firebase/auth';\nimport {useAuthState} from 'react-firebase-hooks/auth';\nimport Home from './Components/Home';\nimport LoginPage from './LoginPage';\nimport {useEffect, useState} from 'react';\nimport AccountPage from './Components/AccountPage';\nimport { getFirestore, orderBy } from \"firebase/firestore\";\nimport { doc, setDoc } from \"firebase/firestore\"; \nimport { collection, query, where, getDocs, addDoc } from \"firebase/firestore\";\nimport {getStorage, ref, uploadBytes} from 'firebase/storage';\n\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD99Ps3ewiDL7WTtaCJaDqBmo5dmSRjuCo\",\n  authDomain: \"cook-mastershare.firebaseapp.com\",\n  projectId: \"cook-mastershare\",\n  storageBucket: \"cook-mastershare.appspot.com\",\n  messagingSenderId: \"901848339378\",\n  appId: \"1:901848339378:web:ea76b02d8ef1cff6670aab\",\n  measurementId: \"G-11NKHJEW95\"\n};\n\nexport let app = initializeApp(firebaseConfig);\nlet auth = getAuth(app);\nlet db = getFirestore(app);\nlet recipes = await getDocs(collection(db, \"recipes\"));\nexport const storage = getStorage(app);\n\nfunction App() {\n  const [showLogin, setShowLogin] = useState(false);\n  const [user] = useAuthState(auth);\n  const [altName, setAltName] = useState('');\n  const [showAccount, setShowAccount] = useState(false);\n  let recipesToShow = [];\n\n      recipes.forEach((doc) => {\n      recipesToShow.push(doc.data());\n      })\n      recipesToShow.sort((a,b) => (a.date > b.date) ? 1 : ((b.date > a.date) ? -1 : 0))\n\n  async function addToDataBase(tname, desc, tcontent, timage, tdate){\n    try {\n      const docRef = await addDoc(collection(db, \"recipes\"), {\n        name: tname,\n        description: desc,\n        content: tcontent,\n        image: timage,\n        author: user.displayName ? user.displayName : nameFromEmail(user.email),\n        likes: 0,\n        date: tdate\n      });\n      console.log(\"Document written with ID: \", tname);\n    } catch (e) {\n      console.error(\"Error adding document: \", e);\n    }\n  }\n\n  function changeShowAccount(){\n    setShowAccount(!showAccount);\n    console.log(showAccount);\n  }\n\n  function changeAltName(newName){\n    setAltName(newName);\n  }\n\n  async function changeEmailAndPass(newemail, newpass){\n    await signInWithEmailAndPassword(auth, newemail, newpass);\n  }\n\n  async function signInWithGoogle(){\n    let provider = new GoogleAuthProvider();\n    await signInWithPopup(auth, provider);\n  }\n  async function signInWithFacebook(){\n    let provider = new FacebookAuthProvider();\n    await signInWithPopup(auth, provider);\n  }\n  async function setShowLoginFalse(){\n    await setShowLogin(false);\n  }\n \n  async function createAccount(thisemail, thispass) {\n    createUserWithEmailAndPassword(auth, thisemail, thispass);\n  }\n  async function signInWithEmail(){\n    signInWithEmailAndPassword(auth, \"emailVar@abv.bg\", \"passwordVar\");\n  }\n  function signOut(){\n    auth.signOut();\n  }\n  function nameFromEmail(emailStr){\n    let res = String('');\n    let i=0;\n    while(emailStr.charAt(i) !== \"@\"){\n        res += emailStr.charAt(i);\n        i++;\n    }\n    return res;\n  }\n  if(showLogin){\n    return <LoginPage altName={changeAltName} signInWithGoogle={signInWithGoogle} email={changeEmailAndPass} signInWithEmail={signInWithEmail} showLogin={setShowLoginFalse} signInWithFacebook={signInWithFacebook} createAccount={createAccount}/>\n  }\n  if(showAccount) {\n    return <AccountPage type={user.displayName ? user.displayName : nameFromEmail(user.email)} name={user.displayName ? user.displayName : nameFromEmail(user.email)} email={user.email} signOut={signOut} unshowAccount={changeShowAccount} addToDB={addToDataBase}/>\n  }\n  return (\n    <>\n      {user ? <Home type={user.displayName ? user.displayName : nameFromEmail(user.email)} btnEvent={changeShowAccount} recipes={recipesToShow}/> : <Home type=\"Login\" btnEvent={() => setShowLogin(true)} recipes={recipesToShow}/>}\n    </>\n  )\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}